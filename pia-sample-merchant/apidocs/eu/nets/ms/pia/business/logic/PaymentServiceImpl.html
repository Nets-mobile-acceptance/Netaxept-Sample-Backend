<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_222) on Wed Jun 24 12:15:19 UTC 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>PaymentServiceImpl (pia merchant service 2.0.0 API)</title>
<meta name="date" content="2020-06-24">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PaymentServiceImpl (pia merchant service 2.0.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":9,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PaymentServiceImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../eu/nets/ms/pia/business/logic/SecurityService.html" title="interface in eu.nets.ms.pia.business.logic"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?eu/nets/ms/pia/business/logic/PaymentServiceImpl.html" target="_top">Frames</a></li>
<li><a href="PaymentServiceImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">eu.nets.ms.pia.business.logic</div>
<h2 title="Class PaymentServiceImpl" class="title">Class PaymentServiceImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>eu.nets.ms.pia.business.logic.PaymentServiceImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic">PaymentService</a></dd>
</dl>
<hr>
<br>
<pre>@Service
public class <span class="typeNameLabel">PaymentServiceImpl</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic">PaymentService</a></pre>
<div class="block"><pre>
 This class implements the payment logic.
 The payment flow follows the following process:
 
 1) Register payment.
    This will stage a payment order in Netaxept using the parameters provided.
    The parameters define what type of payment is staged and will govern what steps are to follow.
    A unique reference to the staged transaction will be returned to the consumer and is to be used 
    during further processing.
    
 2) Terminal call
    This phase does not involve this component.
    During this phase the Client SDK will provide payment details directly to Netaxept.
    For card payments this is PCI sensitive data like card number, CVV/CVD/CID.
    This data will be appended to the transaction identified by the transactionId returned during phase 1).
    This secret data is never passes through this component. It is transmitted and stored in the PCI certified
    environment at Netaxept.
    When done this data will be available for further processing the payment.
  
 3) Authorization
    A call is made to Netaxept to authorize the transaction using the staged data.
    If the authorization succeeds the Order is placed to the Fake Order service.
    Once the order has been placed successfully the money can be captured in the next stage. 
    After successful authorization also the card token is stored for future use, if that option was selected during phase 1)
    
 4) Finalization
    During this phase the payment is either captured or cancelled.
    The criteria for this is if the goods was successfully processed via the fake order service.
    
    A cancellation at this stage will free the amount which was reserved to the card account during phase 2.
     
    After capture, the transaction is complete and cannot be reversed. In that case a refund needs to be 
    invoked which is out of scope for this demo.
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#APPLE_PAY">APPLE_PAY</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../eu/nets/ms/pia/integration/PspConnector.html" title="interface in eu.nets.ms.pia.integration">PspConnector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#connector">connector</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#EASY_PAY">EASY_PAY</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static org.slf4j.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#LOGGER">LOGGER</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#MOBILE_PAY">MOBILE_PAY</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../eu/nets/ms/pia/business/logic/OrderService.html" title="interface in eu.nets.ms.pia.business.logic">OrderService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#orderservice">orderservice</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#PAY_PAL">PAY_PAL</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#PAYTRAIL">PAYTRAIL</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../eu/nets/ms/pia/business/logic/persistence/PaymentPersistenceService.html" title="class in eu.nets.ms.pia.business.logic.persistence">PaymentPersistenceService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#persistenceService">persistenceService</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#SWISH">SWISH</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#VIPPS">VIPPS</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#PaymentServiceImpl--">PaymentServiceImpl</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#capturePayment-java.lang.String-java.lang.String-java.lang.String-eu.nets.ms.pia.service.model.PaymentProcessRequest-eu.nets.ms.pia.service.model.PaymentProcessResponse-">capturePayment</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId,
              <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;merchantId,
              <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;reference,
              <a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessRequest</a>&nbsp;authorizationRq,
              <a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a>&nbsp;authResponse)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../eu/nets/ms/pia/business/domain/Order.html" title="class in eu.nets.ms.pia.business.domain">Order</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#createOrderFromRequest-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.lang.String-">createOrderFromRequest</a></span>(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterRequest</a>&nbsp;request,
                      <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;transactionId)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#deletePayment-java.lang.String-java.lang.String-">deletePayment</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId,
             <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;merchantId)</code>
<div class="block">Delete payment.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../eu/nets/ms/pia/business/domain/Order.html" title="class in eu.nets.ms.pia.business.domain">Order</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#getOrderIfCorrectState-java.lang.String-">getOrderIfCorrectState</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../../eu/nets/ms/pia/service/model/PaymentMethods.html" title="class in eu.nets.ms.pia.service.model">PaymentMethods</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#getPaymentMethods-java.lang.String-">getPaymentMethods</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;consumerId)</code>
<div class="block">Gets the payment methods.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#isOrderPaid-eu.nets.ms.pia.service.model.PaymentProcessResponse-">isOrderPaid</a></span>(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a>&nbsp;authResponse)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#prepareApplePayData-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.util.Map-">prepareApplePayData</a></span>(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterRequest</a>&nbsp;request,
                   <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;additionalData)</code>
<div class="block">Prepare ApplePay data.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#prepareEasyPayData-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.util.Map-eu.nets.ms.pia.business.domain.Consumer-">prepareEasyPayData</a></span>(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterRequest</a>&nbsp;request,
                  <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;additionalData,
                  <a href="../../../../../../eu/nets/ms/pia/business/domain/Consumer.html" title="class in eu.nets.ms.pia.business.domain">Consumer</a>&nbsp;consumer)</code>
<div class="block">Prepare easy pay data.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#process-java.lang.String-java.lang.String-">process</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId,
       <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;merchantId)</code>
<div class="block">Process.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#register-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.lang.String-">register</a></span>(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterRequest</a>&nbsp;request,
        <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;host)</code>
<div class="block">
 Register.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#shouldStoreToken-eu.nets.ms.pia.business.domain.CardToken-eu.nets.ms.pia.business.domain.Consumer-">shouldStoreToken</a></span>(<a href="../../../../../../eu/nets/ms/pia/business/domain/CardToken.html" title="class in eu.nets.ms.pia.business.domain">CardToken</a>&nbsp;token,
                <a href="../../../../../../eu/nets/ms/pia/business/domain/Consumer.html" title="class in eu.nets.ms.pia.business.domain">Consumer</a>&nbsp;consumer)</code>
<div class="block">Checks if the token should be stored.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#storeCardToken-java.lang.String-eu.nets.ms.pia.business.domain.Consumer-java.util.Optional-">storeCardToken</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;transactionId,
              <a href="../../../../../../eu/nets/ms/pia/business/domain/Consumer.html" title="class in eu.nets.ms.pia.business.domain">Consumer</a>&nbsp;consumer,
              <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util">Optional</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;merchantId)</code>
<div class="block">Store card token.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentServiceImpl.html#verify-java.lang.String-java.lang.String-">verify</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId,
      <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;merchantId)</code>
<div class="block">Verify.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOGGER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOGGER</h4>
<pre>private static final&nbsp;org.slf4j.Logger LOGGER</pre>
</li>
</ul>
<a name="PAYTRAIL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PAYTRAIL</h4>
<pre>private static final&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> PAYTRAIL</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#eu.nets.ms.pia.business.logic.PaymentServiceImpl.PAYTRAIL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="EASY_PAY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EASY_PAY</h4>
<pre>public static final&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a> EASY_PAY</pre>
</li>
</ul>
<a name="APPLE_PAY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>APPLE_PAY</h4>
<pre>public static final&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a> APPLE_PAY</pre>
</li>
</ul>
<a name="PAY_PAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PAY_PAL</h4>
<pre>public static final&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a> PAY_PAL</pre>
</li>
</ul>
<a name="VIPPS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>VIPPS</h4>
<pre>public static final&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a> VIPPS</pre>
</li>
</ul>
<a name="SWISH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SWISH</h4>
<pre>public static final&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a> SWISH</pre>
</li>
</ul>
<a name="MOBILE_PAY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MOBILE_PAY</h4>
<pre>public static final&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/Method.html" title="class in eu.nets.ms.pia.service.model">Method</a> MOBILE_PAY</pre>
</li>
</ul>
<a name="connector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connector</h4>
<pre>@Inject
 @Qualifier(value="NetaxeptSOAP")
<a href="../../../../../../eu/nets/ms/pia/integration/PspConnector.html" title="interface in eu.nets.ms.pia.integration">PspConnector</a> connector</pre>
</li>
</ul>
<a name="orderservice">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>orderservice</h4>
<pre>@Inject
<a href="../../../../../../eu/nets/ms/pia/business/logic/OrderService.html" title="interface in eu.nets.ms.pia.business.logic">OrderService</a> orderservice</pre>
</li>
</ul>
<a name="persistenceService">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>persistenceService</h4>
<pre>@Inject
<a href="../../../../../../eu/nets/ms/pia/business/logic/persistence/PaymentPersistenceService.html" title="class in eu.nets.ms.pia.business.logic.persistence">PaymentPersistenceService</a> persistenceService</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PaymentServiceImpl--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PaymentServiceImpl</h4>
<pre>public&nbsp;PaymentServiceImpl()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPaymentMethods-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPaymentMethods</h4>
<pre>public&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentMethods.html" title="class in eu.nets.ms.pia.service.model">PaymentMethods</a>&nbsp;getPaymentMethods(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;consumerId)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#getPaymentMethods-java.lang.String-">PaymentService</a></code></span></div>
<div class="block">Gets the payment methods.
 <pre>
 This method lists the supported payment methods. This is a subset of the methods supported by the payment service provider
 If the payment is initiated by a registered consumer, this list can also contain payments via 
 a previously stored card token. 
 </pre></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#getPaymentMethods-java.lang.String-">getPaymentMethods</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic">PaymentService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>consumerId</code> - the consumer id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the payment methods</dd>
</dl>
</li>
</ul>
<a name="register-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>register</h4>
<pre>public&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterResponse</a>&nbsp;register(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterRequest</a>&nbsp;request,
                                        <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;host)
                                 throws <a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#register-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.lang.String-">PaymentService</a></code></span></div>
<div class="block"><pre>
 Register.
 Two main flows can be started by a call to register.
 
 1) Register card for future use. 
    This is defined by the amount being zero.
    
 2) Payment
    For payments three subflows are defined
    a) Payment via card. Here you can also select to store this card for future use, 
       The store option is available for non-anonymous consumers.
    
    b) Payment via a previously stored card.
       This requires for the consumer to be identified so that the a card token for that consumer
       can be retrieved.
       
    c) Same as b above with the difference that no security code or 3DS will be required.
       This is the fastest payment option with the least amount of consumer interaction.
       The flagging of this option is defined on a per consumer basis and is not something
       the consumer can decide at register time. The enabling of this option should be done
       based on on a risk assessment.  
 
 3) Apple Pay
        Pre-requisite:
                a)      You have integrated towards Apple Pay for web or app (https://developer.apple.com/library/content/ApplePay_Guide/)
 
                b)      You have integrated towards Netaxept via API (https://shop.nets.eu/partners)

                c)      You have an agreement with an acquirer to accept card payments and use the Apple Pay service

  For Apple Pay – Netaxept works as a payment processor. The card data (token) is provided to the merchant
  from Apple, and then passed by the Merchant to Netaxept. This enables server-to-server communication
  towards Netaxept – no redirect of consumer to Netaxept is required, providing a seamless experience on
  for example mobile devices.
 
        Apple Pay is available in both our production (https://epayment.nets.eu) and test environment
        (https://test.epayment.nets.eu). Apple Pay is not available in any of our terminals – which is why you need
        to create the payment request towards Apple and add the Apple Pay-button on your own site or mobile app.
 
        Register Call:
        The paymentMethodActionList-parameter should specify ApplePay
                The parameter service type should be to 'M'
                The parameter PaymentData should be added and contain the encrypted Payment Data from Apple Pay in Json, 
                {"paymentData":{"version":"EC_v1","data":"4………….}
 
 4) Paypal
        a)      You need to enter your PayPal credentials in the agreements tab under the Options menu. 
        You can also set up an account if needed from the same place, through a guide which will help you set up a new account 
        in a few minutes and accepting payments almost instantly. Also note that you need to set up PayPal with the correct currency or currencies.

        b)      Make sure to complete the register API call with the necessary customerCountry parameter. This parameter should follow the Alpha 2 part of
        the ISO 3166-1 standard. For instance, the Nets countries are NO, SE, FI and DK.

        c)      If you set Paypal as value in the REGISTER's payment method list and set service type to 'B', the customer will automatically be forwarded to Paypal's own payment page. 
        If payment method list has no value, Paypal will be listed among other payment alternatives in the Netaxept terminal webpage.

        d)      After the end user returns from the PayPal page, you can use financial process calls (AUTH, ANULL, CAPTURE, SALE, CREDIT) as 
        you would for a regular card-based transaction.
       
 Important:
 The redirect URLs.
 They are used by the mobile SDK during the terminal phase to identify the success of that.
 If the terminal gets redirected to a different URL than the two provided by this response, this
 indicated a 3DS redirection to the card issuer.      
 </pre></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#register-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.lang.String-">register</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic">PaymentService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - the request</dd>
<dd><code>host</code> - the remote host</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the payment register response</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></code> - the business service exception</dd>
</dl>
</li>
</ul>
<a name="prepareEasyPayData-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.util.Map-eu.nets.ms.pia.business.domain.Consumer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareEasyPayData</h4>
<pre>private&nbsp;void&nbsp;prepareEasyPayData(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterRequest</a>&nbsp;request,
                                <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;additionalData,
                                <a href="../../../../../../eu/nets/ms/pia/business/domain/Consumer.html" title="class in eu.nets.ms.pia.business.domain">Consumer</a>&nbsp;consumer)
                         throws <a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></pre>
<div class="block">Prepare easy pay data.
 
 Uses the tokenId from the request to find the token stored by the consumer
 This, together with the expiration date is then populated to the aditional data map.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - the request</dd>
<dd><code>additionalData</code> - the additional data</dd>
<dd><code>consumer</code> - the consumer</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></code> - the business service exception</dd>
</dl>
</li>
</ul>
<a name="prepareApplePayData-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareApplePayData</h4>
<pre>private&nbsp;void&nbsp;prepareApplePayData(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterRequest</a>&nbsp;request,
                                 <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;additionalData)</pre>
<div class="block">Prepare ApplePay data.

 Populate the additional data map with the payment data received in the register request.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - the request</dd>
<dd><code>additionalData</code> - the additional data</dd>
</dl>
</li>
</ul>
<a name="process-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>process</h4>
<pre>public&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a>&nbsp;process(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId,
                                      <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;merchantId)
                               throws <a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#process-java.lang.String-java.lang.String-">PaymentService</a></code></span></div>
<div class="block">Process.
 <pre>
 Issues an Authorization request toward the payment service provider.
 If this succeeds:
      1) Store the card token, if that option was available and selected during Init.
      2) Place the Order to the mocked order service.
      
 If the order is successfully processed:
      1) Capture the reserved amount by calling the payment service provider capture
      
 If the order processing fails:
      2) Reverse the authorization to free the reserved amount
 
 To be noticed, Authorization ID is NOT required for Paypal, but required for card payment.
 
 </pre></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#process-java.lang.String-java.lang.String-">process</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic">PaymentService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>paymentId</code> - the payment id</dd>
<dd><code>merchantId</code> - Id of the Netaxept account to use if this demo application is connected to several test accounts</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the payment process response</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></code> - the business service exception</dd>
</dl>
</li>
</ul>
<a name="capturePayment-java.lang.String-java.lang.String-java.lang.String-eu.nets.ms.pia.service.model.PaymentProcessRequest-eu.nets.ms.pia.service.model.PaymentProcessResponse-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>capturePayment</h4>
<pre>private&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a>&nbsp;capturePayment(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId,
                                              <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;merchantId,
                                              <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;reference,
                                              <a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessRequest</a>&nbsp;authorizationRq,
                                              <a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a>&nbsp;authResponse)</pre>
</li>
</ul>
<a name="isOrderPaid-eu.nets.ms.pia.service.model.PaymentProcessResponse-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOrderPaid</h4>
<pre>private&nbsp;boolean&nbsp;isOrderPaid(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a>&nbsp;authResponse)</pre>
</li>
</ul>
<a name="verify-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verify</h4>
<pre>public&nbsp;<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentProcessResponse.html" title="class in eu.nets.ms.pia.service.model">PaymentProcessResponse</a>&nbsp;verify(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId,
                                     <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;merchantId)
                              throws <a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#verify-java.lang.String-java.lang.String-">PaymentService</a></code></span></div>
<div class="block">Verify.
 <pre>
 This method will be used in the case where a consumer wishes to register a card for future purchases
 without performing a purchase.
 
 During initialization of a transaction using "register", the amount will be set to zero.
 The purpose of this method is to verify that a card that has been tokenized is actually 
 Usable.
 
 An authorization request with VERIFY will be issued to the payment service provider.
 
 Upon successful verification the card  token is stored to the consumer thereby
 enabling future payments using this token.
 </pre></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#verify-java.lang.String-java.lang.String-">verify</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic">PaymentService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>paymentId</code> - the payment id</dd>
<dd><code>merchantId</code> - Id of the Netaxept account to use if this demo application is connected to several test accounts</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the payment process response</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></code> - the business service exception</dd>
</dl>
</li>
</ul>
<a name="storeCardToken-java.lang.String-eu.nets.ms.pia.business.domain.Consumer-java.util.Optional-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeCardToken</h4>
<pre>private&nbsp;void&nbsp;storeCardToken(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;transactionId,
                            <a href="../../../../../../eu/nets/ms/pia/business/domain/Consumer.html" title="class in eu.nets.ms.pia.business.domain">Consumer</a>&nbsp;consumer,
                            <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util">Optional</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;merchantId)</pre>
<div class="block">Store card token.
 
 This is only possible when there is an identifyable consumer to store to.
 
 Retrieve the card token from Netaxept by querying the transaction.
 If storage is selected, the token is stored to the DB, to the consumer profile.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transactionId</code> - the transaction id</dd>
<dd><code>consumer</code> - the consumer</dd>
</dl>
</li>
</ul>
<a name="getOrderIfCorrectState-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrderIfCorrectState</h4>
<pre>private&nbsp;<a href="../../../../../../eu/nets/ms/pia/business/domain/Order.html" title="class in eu.nets.ms.pia.business.domain">Order</a>&nbsp;getOrderIfCorrectState(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId)
                              throws <a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/exception/BusinessServiceException.html" title="class in eu.nets.ms.pia.exception">BusinessServiceException</a></code></dd>
</dl>
</li>
</ul>
<a name="shouldStoreToken-eu.nets.ms.pia.business.domain.CardToken-eu.nets.ms.pia.business.domain.Consumer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldStoreToken</h4>
<pre>private static&nbsp;boolean&nbsp;shouldStoreToken(<a href="../../../../../../eu/nets/ms/pia/business/domain/CardToken.html" title="class in eu.nets.ms.pia.business.domain">CardToken</a>&nbsp;token,
                                        <a href="../../../../../../eu/nets/ms/pia/business/domain/Consumer.html" title="class in eu.nets.ms.pia.business.domain">Consumer</a>&nbsp;consumer)</pre>
<div class="block">Checks if the token should be stored.
 
 If the token represents a card already stored this will NOT be overwritten.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - the token</dd>
<dd><code>consumer</code> - the consumer</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true, if token is to be stored</dd>
</dl>
</li>
</ul>
<a name="deletePayment-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deletePayment</h4>
<pre>public&nbsp;void&nbsp;deletePayment(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;paymentId,
                          <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;merchantId)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#deletePayment-java.lang.String-java.lang.String-">PaymentService</a></code></span></div>
<div class="block">Delete payment.
 <pre>
 Nothing implemented yet
 </pre></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html#deletePayment-java.lang.String-java.lang.String-">deletePayment</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic">PaymentService</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>paymentId</code> - the payment id</dd>
<dd><code>merchantId</code> - Id of the Netaxept account to use if this demo application is connected to several test accounts</dd>
</dl>
</li>
</ul>
<a name="createOrderFromRequest-eu.nets.ms.pia.service.model.PaymentRegisterRequest-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>createOrderFromRequest</h4>
<pre>private&nbsp;<a href="../../../../../../eu/nets/ms/pia/business/domain/Order.html" title="class in eu.nets.ms.pia.business.domain">Order</a>&nbsp;createOrderFromRequest(<a href="../../../../../../eu/nets/ms/pia/service/model/PaymentRegisterRequest.html" title="class in eu.nets.ms.pia.service.model">PaymentRegisterRequest</a>&nbsp;request,
                                     <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;transactionId)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PaymentServiceImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../eu/nets/ms/pia/business/logic/PaymentService.html" title="interface in eu.nets.ms.pia.business.logic"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../eu/nets/ms/pia/business/logic/SecurityService.html" title="interface in eu.nets.ms.pia.business.logic"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?eu/nets/ms/pia/business/logic/PaymentServiceImpl.html" target="_top">Frames</a></li>
<li><a href="PaymentServiceImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2020 <a href="http://www.spring.io">Pivotal Software, Inc.</a>. All rights reserved.</small></p>
</body>
</html>
